# Configuration for apigee-remote-service-envoy (platform: GCP)
# generated by apigee-remote-service-cli provision on 2023-11-08 16:42:52
apiVersion: v1
kind: ConfigMap
metadata:
  name: apigee-remote-service-envoy
  namespace: apigee
data:
  config.yaml: |
    tenant:
      remote_service_api: https://${APIGEE_X_HOSTNAME}/remote-service
      org_name: ${APIGEE_X_ORG}
      env_name: ${APIGEE_X_ENV}
    analytics:
      collection_interval: 10s
    auth:
      jwt_provider_key: https://${APIGEE_X_HOSTNAME}/remote-token/token
      append_metadata_headers: true
---
apiVersion: v1
kind: Secret
metadata:
  name: ${APIGEE_X_ORG}-${APIGEE_X_ENV}-policy-secret
  namespace: apigee
type: Opaque
data:
  remote-service.crt: ${REMOTE_SERVICE_CERT}
  remote-service.key: ${REMOTE_SERVICE_KEY}
  remote-service.properties: ${REMOTE_SERVICE_PROPERTIES}
---
apiVersion: v1
kind: Secret
metadata:
  name: ${APIGEE_X_ORG}-${APIGEE_X_ENV}-analytics-secret
  namespace: apigee
type: Opaque
data:
  client_secret.json: ${CLIENT_SECRET_JSON}
---
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    org: ${APIGEE_X_ORG}
  name: apigee-remote-service-envoy
  namespace: apigee

